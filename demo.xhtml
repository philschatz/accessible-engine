<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <style>
    #my_audio { height: 10rem; overflow: scroll; }
  </style>
</head>

<body>
  <canvas id="my_canvas" width="500" height="250"></canvas>
  <table id="my_table"></table>
  <label for="#my_audio">These are read out as they appear if the user has a screen reader</label>
  <div id="my_audio"></div>
  <script src="browser.bundle.js"></script>

  <script>
    (function() {
      console.log(window.GameEngine)
      const {MyGame, AndOutputter, AudioOutputter, CanvasRenderer, Engine, GridTableOutputter, OrGamepad, VisualOutputter, KeyGamepad } = window.GameEngine

      const myCanvas = document.querySelector('#my_canvas')
      const myTable = document.querySelector('#my_table')
      const myAudio = document.querySelector('#my_audio')

      const logger = (msg) => {
        const line = document.createElement('p')
        line.innerHTML = msg
        myAudio.appendChild(line)
        myAudio.scrollTop = myAudio.scrollHeight
      }
      const outputter = new AndOutputter([
        new AudioOutputter(logger), 
        new VisualOutputter(new CanvasRenderer(myCanvas, 1)), 
        new GridTableOutputter(myTable)
      ])
      const inputter = new KeyGamepad() // new OrGamepad([new KeyGamepad()])
      const engine = new Engine(new MyGame(), outputter, inputter)

      setInterval(() => {
        engine.tick()
      }, 1)

    })()
  </script>
</body>
</html>